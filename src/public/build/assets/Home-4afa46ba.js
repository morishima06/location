import{a,F as S,j as e,r as o,g as P,b as R}from"./app-bc6b9f11.js";import{H as V}from"./Header-8f5426b3.js";import{F as O,A as K,u as M,S as H}from"./SubmitButton-57e89159.js";import"./Logo-99607d83.js";import"./iconBase-80b019e4.js";const I=({children:h})=>a(S,{children:[e(V,{}),h,e(O,{})]}),D=({keyword_props:h})=>{const{setValues:v,cookies:l,removeCookie:u,keywordFormActive:m,setKeywordFormActive:i,setBrandFormActive:N,setAddressFormActive:y}=h,C=o.useRef(null),F=o.useRef(null),f=l.name?l.name.filter((s,g)=>g<5):"",[p,c]=o.useState(f),[x,A]=o.useState("");function w(s){const g=s.target.id,d=s.target.getAttribute("data-name");v(B=>({...B,[g]:d}));var _=new RegExp(d,"i");if(l.name){const k=l.name.filter(n=>n.match(_)).filter((n,E)=>E<5);console.log(k),c(k)}A(d),i(!1)}function j(s){const g=s.target.id,d=s.target.value;var _=new RegExp(d,"i");if(l.name){const k=l.name.filter(n=>n.match(_)).filter((n,E)=>E<5);console.log(k),c(k)}A(d),v(B=>({...B,[g]:d}))}function t(s){i(!m),N(!1),y(!1),document.addEventListener("click",r),s.stopPropagation()}const r=o.useCallback(()=>{i(!1),document.removeEventListener("click",r)},[]);o.useEffect(()=>{m===!0&&F.current.focus()},[m]),o.useEffect(()=>()=>{document.removeEventListener("click",r)},[r]);const b=()=>{A(""),v(s=>({...s,keyword:""})),c(f)};function L(){u("name")}return e(S,{children:e("div",{className:" mb-1 flex h-[40px]  w-full items-center overflow-hidden rounded-lg bg-white sm:relative sm:mb-0 sm:h-[45px] sm:w-1/3 sm:overflow-visible sm:rounded-r-none",onClick:s=>{t(s)},children:a("div",{className:" flex  w-full items-center  ",children:[e("div",{className:"flex w-full items-center ",children:e("div",{className:"w-full pl-4",children:e("input",{form:"form1",id:"keyword",name:"keyword",readOnly:!0,placeholder:"店舗名・キーワード",value:x,ref:C,className:"block text-sm font-medium leading-none placeholder-slate-400  outline-0 placeholder:justify-center placeholder:font-semibold"})})}),e("div",{className:"  ml-auto mr-2",children:x&&e("img",{src:"./images/button.svg",alt:"",className:"w-5 cursor-pointer ",onClick:s=>{b(),s.stopPropagation()}})}),e("div",{className:"fixed left-0 top-0 h-screen w-full bg-white pb-1 sm:absolute sm:h-auto sm:rounded-lg sm:bg-white  sm:shadow-[0px_0px_5px_1px_rgba(0,0,0,0.2)]",onClick:s=>{s.stopPropagation()},style:m?{display:"block"}:{visibility:"hidden"},children:a("div",{className:"",children:[e("div",{className:"flex w-full justify-end sm:hidden  ",children:e("button",{type:"button",onClick:()=>{i(!1)},className:"mr-1 mt-2 flex h-6 w-6 items-center justify-center rounded-sm hover:bg-slate-300",children:e(K,{})})}),e("div",{className:"flex h-[46px]  items-center",children:e("input",{form:"form1",id:"keyword",type:" block",placeholder:"店舗名・キーワード",autoComplete:"off",className:"block w-full px-4   text-lg font-semibold outline-0 placeholder:text-slate-400 sm:text-sm",value:x,ref:F,onChange:j})}),p===null&&e("div",{className:"border-b sm:hidden"}),p&&e("div",{children:p.length>0&&a("div",{children:[e("div",{className:"border-b"}),e("div",{children:p&&p.map(s=>e("p",{className:"cursor-pointer bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-100 ",id:"keyword","data-name":s,onClick:w,children:s},s))}),e("button",{type:"button",className:"cursor-pointer pl-4 text-xs text-blue-600",onClick:L,children:"すべててクリア"})]})})]})})]})})})},U=({brand_props:h})=>{const{values:v,keywords:l,setValues:u,brands:m,brandFormActive:i,setKeywordFormActive:N,setBrandFormActive:y,setAddressFormActive:C}=h;console.log(l);const F=m.filter((s,g)=>g<6),[f,p]=o.useState(F),[c,x]=o.useState("");console.log(f);const A=o.useRef(null),w=o.useRef(null);console.log(c);function j(s){y(!i),N(!1),C(!1),document.addEventListener("click",t),s.stopPropagation()}const t=o.useCallback(()=>{y(!1),document.removeEventListener("click",t)},[]);o.useEffect(()=>{i===!0&&w.current.focus()},[i]),o.useEffect(()=>()=>{document.removeEventListener("click",t)},[t]);const r=()=>{x(""),u(s=>({...s,brand:""})),p(F)};function b(s){const g=s.target.id,d=s.target.getAttribute("data-name");u(n=>({...n,[g]:d})),console.log(d);var _=new RegExp(d,"i");const k=m.filter(n=>n.name.match(_)).filter((n,E)=>E<5);console.log(k),p(k),x(d),y(!1),console.log(i)}function L(s){const g=s.target.id,d=s.target.value;console.log(g),x(d),u(n=>({...n,[g]:d}));var _=new RegExp(d,"i");const k=m.filter(n=>n.name.match(_)||n.katakana.match(_)||n.hiragana.match(_)).filter((n,E)=>E<5);console.log(k),p(k)}return e(S,{children:a("div",{className:"mb-1 flex h-[40px]  w-full items-center overflow-hidden rounded-lg bg-white sm:relative sm:mb-0 sm:h-[45px] sm:w-1/3 sm:overflow-visible sm:rounded-none",onClick:s=>{j(s)},children:[e("div",{className:"hidden h-[calc(100%-16px)] w-[1px]  bg-slate-300 sm:block"}),a("div",{className:" flex  w-full items-center  ",children:[e("div",{className:"flex w-full items-center pl-4",children:e("div",{className:"w-full",children:e("input",{form:"form1",id:"brand",name:"brand",readOnly:!0,autoComplete:"off",placeholder:"ブランド名",value:c||"",ref:A,className:" block text-sm font-medium leading-none placeholder-slate-400 outline-0 placeholder:justify-center placeholder:font-semibold"})})}),e("div",{className:"  ml-auto mr-2",children:c&&e("img",{src:"./images/button.svg",alt:"",className:"w-5 cursor-pointer ",onClick:s=>{r(),s.stopPropagation()}})}),e("div",{className:"fixed left-0 top-0 h-screen w-full overflow-hidden bg-white pb-1 sm:absolute sm:mt-0 sm:h-auto sm:rounded-lg sm:bg-white  sm:shadow-[0px_0px_5px_1px_rgba(0,0,0,0.2)]",onClick:s=>{s.stopPropagation()},style:i?{display:"block"}:{visibility:"hidden"},children:a("div",{className:"mr-1",children:[e("div",{className:"flex w-full justify-end sm:hidden ",children:e("button",{type:"button",onClick:()=>{y(!1)},className:"mr-1 mt-2 flex h-6 w-6 items-center justify-center rounded-sm hover:bg-slate-300",children:e(K,{})})}),e("div",{className:"flex h-[46px] items-center",children:e("input",{form:"form1",id:"brand",type:" block",placeholder:"ブランド名",autoComplete:"off",className:"block w-full px-4 text-lg font-semibold placeholder-slate-400 outline-0 sm:text-sm",value:c||"",ref:w,onChange:L})}),f.length>0&&a("div",{children:[e("div",{className:"border-b"}),f.map(s=>e("p",{className:"cursor-pointer bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-100 ",id:"brand","data-name":s.name,onClick:b,children:s.name+" ("+s.katakana+")"},s.name))]})]})})]})]})})},q=({address_props:h})=>{const{setValues:v,prefuctures:l,addressFormActive:u,setKeywordFormActive:m,setBrandFormActive:i,setAddressFormActive:N}=h,y=o.useRef(null),[C,F]=o.useState({0:!1}),[f,p]=o.useState(""),c=t=>{console.log(t),F(r=>({...r,[t]:!r[t]}))},x=()=>{p(""),v(t=>({...t,address:""}))};function A(t){N(!u),m(!1),i(!1),document.addEventListener("click",w),t.stopPropagation()}const w=o.useCallback(()=>{N(!1),document.removeEventListener("click",w)},[]);o.useEffect(()=>()=>{document.removeEventListener("click",w)},[w]);const j=t=>{const r=t.target.getAttribute("data-adname"),b=t.target.getAttribute("data-ad_code"),L=t.target.id;v(s=>({...s,[L]:b})),p(r),N(!1)};return e(S,{children:a("div",{className:"mb-1 flex h-[40px]  w-full items-center overflow-hidden rounded-lg bg-white sm:relative sm:mb-0 sm:h-[45px] sm:w-1/3 sm:overflow-visible sm:rounded-none",onClick:t=>{A(t)},children:[e("div",{className:"hidden h-[calc(100%-16px)] w-[1px]  bg-slate-300 sm:block"}),a("div",{className:" flex  w-full items-center  ",children:[e("div",{className:"flex w-full items-center pl-4",children:e("div",{className:"w-full",children:e("input",{form:"form1",id:"address",readOnly:!0,className:"block text-sm font-medium placeholder-slate-400 outline-0 placeholder:font-semibold ",name:"address",value:f||"",ref:y,placeholder:"都道府県"})})}),e("div",{className:"  ml-auto mr-2",children:f&&e("img",{src:"./images/button.svg",alt:"",className:"w-5 cursor-pointer ",onClick:t=>{x(),t.stopPropagation()}})}),e("div",{className:" fixed left-0 top-0 h-screen w-full overflow-hidden bg-white pb-1 sm:absolute sm:mt-12 sm:h-auto sm:rounded-lg sm:bg-white  sm:shadow-[0px_0px_5px_1px_rgba(0,0,0,0.2)]",onClick:t=>{t.stopPropagation()},style:u?{display:"block"}:{visibility:"hidden"},children:a("div",{className:"mr-1 ",children:[e("div",{className:"flex w-full justify-end sm:hidden ",children:e("button",{type:"button",onClick:()=>{N(!1)},className:"mr-1 mt-2 flex h-6 w-6 items-center justify-center rounded-sm hover:bg-slate-300",children:e(K,{})})}),e("p",{className:"mb-2 flex w-full justify-center border-b border-slate-100 pb-2 font-semibold drop-shadow-sm sm:my-2",children:"エリア一覧"}),e("div",{className:"max-h-[50px] overflow-scroll",children:Object.keys(l).map((t,r)=>a("div",{children:[a("div",{className:"flex max-h-[60px]  cursor-pointer items-center overflow-scroll hover:bg-slate-100","data-state_code":l[t].state_code,children:[e("div",{className:" flex py-1 pl-3 text-[15px] hover:text-blue-500",onClick:j,children:a("p",{id:"address",className:"pr-[2px]","data-adname":l[t].state,"data-ad_code":l[t].state_code,children:[l[t].state,"(",l[t].count,")"]})}),e("div",{className:"flex grow justify-end pr-4",onClick:()=>c(r),children:e("span",{className:"  ",children:"+"})})]}),C[r]?e("div",{className:"py-[2px] ",children:C[r]?l[t].area.map((b,L)=>e("div",{onClick:j,children:a("div",{className:" cursor-pointer py-[2px] pl-3 pr-[3px] text-[12px] hover:text-blue-500  ",id:"address","data-adname":b.name,"data-ad_code":b.area_code,children:[b.name,"(",b.count,")"]})},L)):void 0}):void 0]},r))})]})})]})]})})},z=({brands:h,prefuctures:v})=>{const[l,u]=o.useState({keyword:"",brand:"",address:""}),[m,i,N]=M(""),[y,C]=o.useState(!1),[F,f]=o.useState(!1),[p,c]=o.useState(!1),x={setValues:u,cookies:m,setCookie:i,removeCookie:N,keywordFormActive:y,setKeywordFormActive:C,setBrandFormActive:f,setAddressFormActive:c},A={setValues:u,brands:h,brandFormActive:F,setKeywordFormActive:C,setBrandFormActive:f,setAddressFormActive:c},w={setValues:u,prefuctures:v,addressFormActive:p,setKeywordFormActive:C,setBrandFormActive:f,setAddressFormActive:c};function j(t){t.preventDefault();const r=l.keyword;if(!r==""){if(m.name==null)i("name",[r]);else if(!m.name.includes(r)){const b=[...m.name,r];i("name",b)}}P.get("/search",l)}return a(S,{children:[e(D,{keyword_props:x}),e(U,{brand_props:A}),e(q,{address_props:w}),e("div",{className:"  mt-1 flex  items-center rounded-lg bg-blue-700 px-3 sm:mr-0 sm:mt-0 sm:w-16   sm:rounded-l-none ",children:e(H,{handleSubmit:j})})]})},G=({keywords:h,brands:v,prefuctures:l})=>e("div",{style:{backgroundImage:"url(./images/background-top.jpg)"},className:"flex  h-[400px] w-full items-center  justify-center  bg-center bg-no-repeat sm:h-[437px]   ",children:a("div",{className:"w-full px-1 sm:max-w-[800px] sm:px-0 ",children:[a("div",{className:"flex justify-center ",children:[e("img",{src:"./images/front_subject.svg",alt:"",className:"mb-2  hidden sm:block sm:w-[740px]   "}),a("div",{className:"w-full sm:hidden ",children:[e("h2",{className:"text-[38px] font-semibold  italic text-white",children:"探してるショップがすぐに見つかる"}),e("h3",{className:"text-[18px] font-semibold italic text-white",children:"ブランドセレクトショップ検索サイト"})]})]}),e("div",{className:"    flex  w-full justify-center pb-3 pt-2 sm:pt-4",children:e("div",{className:" w-full   justify-center sm:flex sm:h-[45px] ",children:e(z,{keywords:h,brands:v,prefuctures:l})})})]})}),Y=h=>{const{brands:v,prefuctures:l,keywords:u}=h;return console.log("http://localhost"),console.log({}.APP_URL||"false"),e(S,{children:a(I,{children:[e(R,{title:"top"}),e(G,{keywords:u,brands:v,prefuctures:l}),e("div",{className:" mt-8  flex justify-center sm:mt-10",children:a("div",{children:[e("img",{src:"./images/intro.jpg",alt:"",className:"hidden w-full max-w-[920px] sm:block"}),e("img",{src:"./images/intro_responsive.jpg",alt:"",className:" w-full sm:hidden"})]})})]})})};export{Y as default};
